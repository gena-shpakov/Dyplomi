<script>
  function choosePart(part) {
    localStorage.setItem("selectedPart", part);
    renderView(part);
  }

  function renderView(part) {
    const view = document.getElementById("view");
    const selection = document.getElementById("selection");

    selection.style.display = "none";
    view.innerHTML = `<p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>`;

    google.script.run
      .withSuccessHandler(function (html) {
        view.innerHTML = `
        <div style="margin-bottom: 20px;">
          <button class="btn" onclick="resetPart()">üîÑ –ó–º—ñ–Ω–∏—Ç–∏ –≤–∏–±—ñ—Ä</button>
        </div>
        ${html}
      `;
      })
      .loadPage(part);
  }

  function resetPart() {
    localStorage.removeItem("selectedPart");
    document.getElementById("selection").style.display = "flex";
    document.getElementById("view").innerHTML = "";
    history.pushState({}, "", location.pathname);
  }

  window.onload = () => {
    const saved = localStorage.getItem("selectedPart");
    if (saved) {
      renderView(saved);
    }
  };
</script>
